

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Data Structures &mdash; scikit-mobility  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Preprocessing" href="preprocessing.html" />
    <link rel="prev" title="Scikit-mobility Installation" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html" class="icon icon-home"> scikit-mobility
          

          
            
            <img src="../_static/logo_skmob.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-skmob.core.trajectorydataframe">TrajDataframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-skmob.core.flowdataframe">FlowDataframe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="measures.html">Measures</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="privacy.html">Privacy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">scikit-mobility</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Data Structures</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/reference/data_structures.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-structures">
<h1>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h1>
<p>scikit-mobility provides two different data structures, both extending the Pandas dataframe: TrajDataframe is designed to deal with trajectories, i.e., data in form of GPS points; FlowDataFrame allows to manage fluxes between places.</p>
<div class="section" id="module-skmob.core.trajectorydataframe">
<span id="trajdataframe"></span><h2>TrajDataframe<a class="headerlink" href="#module-skmob.core.trajectorydataframe" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skmob.core.trajectorydataframe.</span></span><span class="sig-name descname"><span class="pre">TrajDataFrame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latitude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longitude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lng'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'datetime'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'uid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trajectory_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'init':</span> <span class="pre">'epsg:4326'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>TrajDataFrame.</p>
<p>A TrajDataFrame object is a pandas.DataFrame that has three columns latitude, longitude and datetime. TrajDataFrame accepts the following keyword arguments:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>list or dict or pandas DataFrame</em>) – the data that must be embedded into a TrajDataFrame.</p></li>
<li><p><strong>latitude</strong> (<em>int or str, optional</em>) – the position or the name of the column in <cite>data</cite> containing the latitude. The default is <cite>constants.LATITUDE</cite>.</p></li>
<li><p><strong>longitude</strong> (<em>int or str, optional</em>) – the position or the name of the column in <cite>data</cite> containing the longitude. The default is <cite>constants.LONGITUDE</cite>.</p></li>
<li><p><strong>datetime</strong> (<em>int or str, optional</em>) – the position or the name of the column in <cite>data</cite> containing the datetime. The default is <cite>constants.DATETIME</cite>.</p></li>
<li><p><strong>user_id</strong> (<em>int or str, optional</em>) – the position or the name of the column in <cite>data`containing the user identifier. The default is `constants.UID</cite>.</p></li>
<li><p><strong>trajectory_id</strong> (<em>int or str, optional</em>) – the position or the name of the column in <cite>data</cite> containing the trajectory identifier. The default is <cite>constants.TID</cite>.</p></li>
<li><p><strong>timestamp</strong> (<em>boolean, optional</em>) – it True, the datetime is a timestamp. The default is <cite>False</cite>.</p></li>
<li><p><strong>crs</strong> (<em>dict, optional</em>) – the coordinate reference system of the geographic points. The default is <cite>{“init”: “epsg:4326”}</cite>.</p></li>
<li><p><strong>parameters</strong> (<em>dict, optional</em>) – parameters to add to the TrajDataFrame. The default is <cite>{}</cite> (no parameters).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a TrajDataFrame from a list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">39.984094</span><span class="p">,</span> <span class="mf">116.319236</span><span class="p">,</span> <span class="s1">&#39;2008-10-23 13:53:05&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">39.984198</span><span class="p">,</span> <span class="mf">116.319322</span><span class="p">,</span> <span class="s1">&#39;2008-10-23 13:53:06&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">39.984224</span><span class="p">,</span> <span class="mf">116.319402</span><span class="p">,</span> <span class="s1">&#39;2008-10-23 13:53:11&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">39.984211</span><span class="p">,</span> <span class="mf">116.319389</span><span class="p">,</span> <span class="s1">&#39;2008-10-23 13:53:16&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">   0        lat         lng            datetime</span>
<span class="go">0  1  39.984094  116.319236 2008-10-23 13:53:05</span>
<span class="go">1  1  39.984198  116.319322 2008-10-23 13:53:06</span>
<span class="go">2  1  39.984224  116.319402 2008-10-23 13:53:11</span>
<span class="go">3  1  39.984211  116.319389 2008-10-23 13:53:16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">tdf</span><span class="p">))</span>
<span class="go">&lt;class &#39;skmob.core.trajectorydataframe.TrajDataFrame&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a TrajDataFrame from a pandas DataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a DataFrame from the previous list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;lng&#39;</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data_df</span><span class="p">))</span>
<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">data_df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">tdf</span><span class="p">))</span>
<span class="go">&lt;class &#39;skmob.core.trajectorydataframe.TrajDataFrame&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">   uid        lat         lng            datetime</span>
<span class="go">0    1  39.984094  116.319236 2008-10-23 13:53:05</span>
<span class="go">1    1  39.984198  116.319322 2008-10-23 13:53:06</span>
<span class="go">2    1  39.984224  116.319402 2008-10-23 13:53:11</span>
<span class="go">3    1  39.984211  116.319389 2008-10-23 13:53:16</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.mapping">
<span class="sig-name descname"><span class="pre">mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tessellation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_na</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign each point of the TrajDataFrame to the corresponding tile of a spatial tessellation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tessellation</strong> (<em>GeoDataFrame</em>) – the spatial tessellation containing a geometry column with points or polygons.</p></li>
<li><p><strong>remove_na</strong> (<em>boolean, optional</em>) – if <cite>True</cite>, remove points that do not have a corresponding tile in the spatial tessellation. The default is <cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a TrajDataFrame with an additional column <cite>tile_ID</cite> indicating the tile identifiers.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#skmob.core.trajectorydataframe.TrajDataFrame" title="skmob.core.trajectorydataframe.TrajDataFrame">TrajDataFrame</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skmob.tessellation</span> <span class="kn">import</span> <span class="n">tilers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skmob.preprocessing</span> <span class="kn">import</span> <span class="n">filtering</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># build a tessellation over the city</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tessellation</span> <span class="o">=</span> <span class="n">tilers</span><span class="o">.</span><span class="n">tiler</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;squared&quot;</span><span class="p">,</span> <span class="n">base_shape</span><span class="o">=</span><span class="s2">&quot;Beijing, China&quot;</span><span class="p">,</span> <span class="n">meters</span><span class="o">=</span><span class="mi">15000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mtdf</span> <span class="o">=</span> <span class="n">tdf</span><span class="o">.</span><span class="n">mapping</span><span class="p">(</span><span class="n">tessellation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">mtdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid tile_ID</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1      63</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1      63</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1      63</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1      63</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1      63</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.plot_diary">
<span class="sig-name descname"><span class="pre">plot_diary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_datetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_datetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.plot_diary" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a mobility diary of an individual in a TrajDataFrame. It requires a TrajDataFrame with clusters, output of <cite>preprocessing.clustering.cluster</cite>. The column <cite>constants.CLUSTER</cite> must be present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (<em>str or int</em>) – user identifier whose diary should be plotted.</p></li>
<li><p><strong>start_datetime</strong> (<em>datetime.datetime, optional</em>) – only stops made after this date will be plotted. If <cite>None</cite> the datetime of the oldest stop will be selected. The default is <cite>None</cite>.</p></li>
<li><p><strong>end_datetime</strong> (<em>datetime.datetime, optional</em>) – only stops made before this date will be plotted. If <cite>None</cite> the datetime of the newest stop will be selected. The default is <cite>None</cite>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes, optional</em>) – axes where the diary will be plotted. If <cite>None</cite> a new ax is created. The default is <cite>None</cite>.</p></li>
<li><p><strong>legend</strong> (<em>bool, optional</em>) – If <cite>True</cite>, legend with cluster IDs is shown. The default is <cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the <cite>matplotlib.axes</cite> object of the plotted diary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.axes</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skmob.preprocessing</span> <span class="kn">import</span> <span class="n">detection</span><span class="p">,</span> <span class="n">clustering</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># detect stops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stdf</span> <span class="o">=</span> <span class="n">detection</span><span class="o">.</span><span class="n">stops</span><span class="p">(</span><span class="n">tdf</span><span class="p">,</span> <span class="n">stop_radius_factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">minutes_for_a_stop</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">spatial_radius_km</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">leaving_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid    leaving_datetime</span>
<span class="go">0  39.978030  116.327481 2008-10-23 06:01:37    1 2008-10-23 10:32:53</span>
<span class="go">1  40.013820  116.306532 2008-10-23 11:10:19    1 2008-10-23 23:45:27</span>
<span class="go">2  39.978419  116.326870 2008-10-24 00:21:52    1 2008-10-24 01:47:30</span>
<span class="go">3  39.981166  116.308475 2008-10-24 02:02:31    1 2008-10-24 02:30:29</span>
<span class="go">4  39.981431  116.309902 2008-10-24 02:30:29    1 2008-10-24 03:16:35</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># cluster stops</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cstdf</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">cluster</span><span class="p">(</span><span class="n">stdf</span><span class="p">,</span> <span class="n">cluster_radius_km</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">min_samples</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cstdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid    leaving_datetime  cluster</span>
<span class="go">0  39.978030  116.327481 2008-10-23 06:01:37    1 2008-10-23 10:32:53        0</span>
<span class="go">1  40.013820  116.306532 2008-10-23 11:10:19    1 2008-10-23 23:45:27        1</span>
<span class="go">2  39.978419  116.326870 2008-10-24 00:21:52    1 2008-10-24 01:47:30        0</span>
<span class="go">3  39.981166  116.308475 2008-10-24 02:02:31    1 2008-10-24 02:30:29       42</span>
<span class="go">4  39.981431  116.309902 2008-10-24 02:30:29    1 2008-10-24 03:16:35       41</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plot the diary of one individual</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_datetime</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2008-10-23 030000&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end_datetime</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2008-10-30 030000&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">cstdf</span><span class="o">.</span><span class="n">plot_diary</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">start_datetime</span><span class="o">=</span><span class="n">start_datetime</span><span class="p">,</span> <span class="n">end_datetime</span><span class="o">=</span><span class="n">end_datetime</span><span class="p">)</span>
</pre></div>
</div>
<img alt="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_diary_example.png" src="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_diary_example.png" />
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.plot_stops">
<span class="sig-name descname"><span class="pre">plot_stops</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_users</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cartodbpositron'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hex_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opacity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_sides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">popup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.plot_stops" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the stops in the TrajDataFrame on a Folium map. This function requires a TrajDataFrame with stops or clusters, output of <cite>preprocessing.detection.stops</cite> or <cite>preprocessing.clustering.cluster</cite> functions. The column <cite>constants.LEAVING_DATETIME</cite> must be present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><em>param map_f: folium.Map</em> – <cite>folium.Map</cite> object where the stops will be plotted. If <cite>None</cite>, a new map will be created.</p></li>
<li><p><em>param max_users: int</em> – maximum number of users whose stops should be plotted.</p></li>
<li><p><em>param tiles: str</em> – folium’s <cite>tiles</cite> parameter.</p></li>
<li><p><em>param zoom: int</em> – initial zoom.</p></li>
<li><p><em>param hex_color: str</em> – hex color of the stop markers. If <cite>None</cite> a random color will be generated for each user.</p></li>
<li><p><em>param opacity: float</em> – opacity (alpha level) of the stop makers.</p></li>
<li><p><em>param radius: float</em> – size of the markers.</p></li>
<li><p><em>param number_of_sides: int</em> – number of sides of the markers.</p></li>
<li><p><em>param popup: bool</em> – if <cite>True</cite>, when clicking on a marker a popup window displaying information on the stop will appear.</p></li>
<li><p><em>param control_scale: bool</em> – if <cite>True</cite>, add scale information in the bottom left corner of the visualization. The default is <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>folium.Map</cite> object with the plotted stops.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skmob.preprocessing</span> <span class="kn">import</span> <span class="n">detection</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stdf</span> <span class="o">=</span> <span class="n">detection</span><span class="o">.</span><span class="n">stops</span><span class="p">(</span><span class="n">tdf</span><span class="p">,</span> <span class="n">stop_radius_factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">minutes_for_a_stop</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">spatial_radius_km</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">leaving_time</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">stdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid    leaving_datetime</span>
<span class="go">0  39.978030  116.327481 2008-10-23 06:01:37    1 2008-10-23 10:32:53</span>
<span class="go">1  40.013820  116.306532 2008-10-23 11:10:19    1 2008-10-23 23:45:27</span>
<span class="go">2  39.978419  116.326870 2008-10-24 00:21:52    1 2008-10-24 01:47:30</span>
<span class="go">3  39.981166  116.308475 2008-10-24 02:02:31    1 2008-10-24 02:30:29</span>
<span class="go">4  39.981431  116.309902 2008-10-24 02:30:29    1 2008-10-24 03:16:35</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">map_f</span> <span class="o">=</span> <span class="n">tdf</span><span class="o">.</span><span class="n">plot_trajectory</span><span class="p">(</span><span class="n">max_points</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">start_end_markers</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stdf</span><span class="o">.</span><span class="n">plot_stops</span><span class="p">(</span><span class="n">map_f</span><span class="o">=</span><span class="n">map_f</span><span class="p">)</span>
</pre></div>
</div>
<img alt="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_stops_example.png" src="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_stops_example.png" />
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.plot_trajectory">
<span class="sig-name descname"><span class="pre">plot_trajectory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">map_f=None</span></em>, <em class="sig-param"><span class="pre">max_users=None</span></em>, <em class="sig-param"><span class="pre">max_points=1000</span></em>, <em class="sig-param"><span class="pre">style_function=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></em>, <em class="sig-param"><span class="pre">tiles='cartodbpositron'</span></em>, <em class="sig-param"><span class="pre">zoom=12</span></em>, <em class="sig-param"><span class="pre">hex_color=None</span></em>, <em class="sig-param"><span class="pre">weight=2</span></em>, <em class="sig-param"><span class="pre">opacity=0.75</span></em>, <em class="sig-param"><span class="pre">dashArray='0</span></em>, <em class="sig-param"><span class="pre">0'</span></em>, <em class="sig-param"><span class="pre">start_end_markers=True</span></em>, <em class="sig-param"><span class="pre">control_scale=True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.plot_trajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the trajectories on a Folium map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><em>param map_f: folium.Map</em> – <cite>folium.Map</cite> object where the trajectory will be plotted. If <cite>None</cite>, a new map will be created.</p></li>
<li><p><em>param max_users: int</em> – maximum number of users whose trajectories should be plotted.</p></li>
<li><p><em>param max_points: int</em> – maximum number of points per user to plot.
If necessary, a user’s trajectory will be down-sampled to have at most <cite>max_points</cite> points.</p></li>
<li><p><em>param style_function: lambda function</em> – function specifying the style (weight, color, opacity) of the GeoJson object.</p></li>
<li><p><em>param tiles: str</em> – folium’s <cite>tiles</cite> parameter.</p></li>
<li><p><em>param zoom: int</em> – initial zoom.</p></li>
<li><p><em>param hex_color: str</em> – hex color of the trajectory line. If <cite>None</cite> a random color will be generated for each trajectory.</p></li>
<li><p><em>param weight: float</em> – thickness of the trajectory line.</p></li>
<li><p><em>param opacity: float</em> – opacity (alpha level) of the trajectory line.</p></li>
<li><p><em>param dashArray: str</em> – style of the trajectory line: ‘0, 0’ for a solid trajectory line, ‘5, 5’ for a dashed line
(where dashArray=’size of segment, size of spacing’).</p></li>
<li><p><em>param start_end_markers: bool</em> – add markers on the start and end points of the trajectory.</p></li>
<li><p><em>param control_scale: bool</em> – if <cite>True</cite>, add scale information in the bottom left corner of the visualization. The default is <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><cite>folium.Map</cite> object with the plotted trajectories.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">tdf</span><span class="o">.</span><span class="n">plot_trajectory</span><span class="p">(</span><span class="n">zoom</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;Stamen Toner&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
</pre></div>
</div>
<img alt="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_trajectory_example.png" src="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_trajectory_example.png" />
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.settings_from">
<span class="sig-name descname"><span class="pre">settings_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trajdataframe</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.settings_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the attributes from another TrajDataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>trajdataframe</strong> (<em>TrajDataFrame</em>) – the TrajDataFrame from which to copy the attributes.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf1</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf1</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf1</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
<span class="go">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf2</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;hasProperty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf2</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
<span class="go">{&#39;hasProperty&#39;: True}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf1</span><span class="o">.</span><span class="n">settings_from</span><span class="p">(</span><span class="n">tdf2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf1</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
<span class="go">{&#39;hasProperty&#39;: True}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.timezone_conversion">
<span class="sig-name descname"><span class="pre">timezone_conversion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_timezone</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_timezone</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.timezone_conversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the timezone of the datetime in the TrajDataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_timezone</strong> (<em>str</em>) – the current timezone of the TrajDataFrame (e.g., ‘GMT’).</p></li>
<li><p><strong>to_timezone</strong> (<em>str</em>) – the new timezone of the TrajDataFrame (e.g., ‘Asia/Shanghai’).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span><span class="o">.</span><span class="n">timezone_conversion</span><span class="p">(</span><span class="s1">&#39;GMT&#39;</span><span class="p">,</span> <span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng  uid            datetime</span>
<span class="go">0  39.984094  116.319236    1 2008-10-23 13:53:05</span>
<span class="go">1  39.984198  116.319322    1 2008-10-23 13:53:06</span>
<span class="go">2  39.984224  116.319402    1 2008-10-23 13:53:11</span>
<span class="go">3  39.984211  116.319389    1 2008-10-23 13:53:16</span>
<span class="go">4  39.984217  116.319422    1 2008-10-23 13:53:21</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajDataFrame.to_flowdataframe">
<span class="sig-name descname"><span class="pre">to_flowdataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tessellation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">self_loops</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajDataFrame.to_flowdataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate a TrajDataFrame into a FlowDataFrame.
The points that do not have a corresponding tile in the spatial tessellation are removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tessellation</strong> (<em>GeoDataFrame</em>) – the spatial tessellation to use to aggregate the points.</p></li>
<li><p><strong>self_loops</strong> (<em>boolean</em>) – if True, it counts movements that start and end in the same tile. The default is <cite>True</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the FlowDataFrame obtained as an aggregation of the TrajDataFrame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#skmob.core.flowdataframe.FlowDataFrame" title="skmob.core.flowdataframe.FlowDataFrame">FlowDataFrame</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skmob.tessellation</span> <span class="kn">import</span> <span class="n">tilers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skmob.preprocessing</span> <span class="kn">import</span> <span class="n">filtering</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># read the trajectory data (GeoLife, Beijing, China)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">GEOLIFE_SAMPLE</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">TrajDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="s1">&#39;datetime&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">         lat         lng            datetime  uid</span>
<span class="go">0  39.984094  116.319236 2008-10-23 05:53:05    1</span>
<span class="go">1  39.984198  116.319322 2008-10-23 05:53:06    1</span>
<span class="go">2  39.984224  116.319402 2008-10-23 05:53:11    1</span>
<span class="go">3  39.984211  116.319389 2008-10-23 05:53:16    1</span>
<span class="go">4  39.984217  116.319422 2008-10-23 05:53:21    1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># build a tessellation over the city</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tessellation</span> <span class="o">=</span> <span class="n">tilers</span><span class="o">.</span><span class="n">tiler</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;squared&quot;</span><span class="p">,</span> <span class="n">base_shape</span><span class="o">=</span><span class="s2">&quot;Beijing, China&quot;</span><span class="p">,</span> <span class="n">meters</span><span class="o">=</span><span class="mi">15000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># counting movements that start and end in the same tile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fdf</span> <span class="o">=</span> <span class="n">tdf</span><span class="o">.</span><span class="n">to_flowdataframe</span><span class="p">(</span><span class="n">tessellation</span><span class="o">=</span><span class="n">tessellation</span><span class="p">,</span> <span class="n">self_loops</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">  origin destination  flow</span>
<span class="go">0     49          49   788</span>
<span class="go">1     49          62     1</span>
<span class="go">2     50          50  4974</span>
<span class="go">3     50          63     1</span>
<span class="go">4     61          61   207</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">FlowDataFrame</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skmob.core.trajectorydataframe.TrajSeries">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skmob.core.trajectorydataframe.</span></span><span class="sig-name descname"><span class="pre">TrajSeries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fastpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.trajectorydataframe.TrajSeries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-skmob.core.flowdataframe">
<span id="flowdataframe"></span><h2>FlowDataframe<a class="headerlink" href="#module-skmob.core.flowdataframe" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skmob.core.flowdataframe.FlowDataFrame">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skmob.core.flowdataframe.</span></span><span class="sig-name descname"><span class="pre">FlowDataFrame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'origin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'destination'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'flow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'datetime'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tile_ID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tessellation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.flowdataframe.FlowDataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>A FlowDataFrame object is a pandas.DataFrame that has three columns origin, destination, and flow. FlowDataFrame accepts the following keyword arguments:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>list or dict or pandas DataFrame</em>) – the data that must be embedded into a FlowDataFrame.</p></li>
<li><p><strong>origin</strong> (<em>str, optional</em>) – the name of the column in <cite>data</cite> containing the origin location. The default is <cite>constants.ORIGIN</cite>.</p></li>
<li><p><strong>destination</strong> (<em>str, optional</em>) – the name of the column in <cite>data</cite> containing the destination location. The default is <cite>constants.DESTINATION</cite>.</p></li>
<li><p><strong>flow</strong> (<em>str, optional</em>) – the name of the column in <cite>data</cite> containing the flow between two locations. The default is <cite>constants.FLOW</cite>.</p></li>
<li><p><strong>datetime</strong> (<em>str, optional</em>) – the name of the column in <cite>data</cite> containing the datetime the flow refers to. The default is <cite>constants.DATETIME</cite>.</p></li>
<li><p><strong>tile_id</strong> (<em>std, optional</em>) – the name of the column in <cite>data</cite> containing the tile identifier. The default is <cite>constants.TILE_ID</cite>.</p></li>
<li><p><strong>timestamp</strong> (<em>boolean, optional</em>) – it True, the datetime is a timestamp. The default is <cite>False</cite>.</p></li>
<li><p><strong>tessellation</strong> (<em>GeoDataFrame, optional</em>) – the spatial tessellation on which the flows take place. The default is <cite>None</cite>.</p></li>
<li><p><strong>parameters</strong> (<em>dict, optional</em>) – parameters to add to the FlowDataFrame. The default is <cite>{}</cite> (no parameters).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load a spatial tessellation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_tess</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">NY_COUNTIES_2011</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tessellation</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">url_tess</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;tile_id&#39;</span><span class="p">:</span> <span class="s1">&#39;tile_ID&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tessellation</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">  tile_ID  population                                           geometry</span>
<span class="go">0   36019       81716  POLYGON ((-74.006668 44.886017, -74.027389 44....</span>
<span class="go">1   36101       99145  POLYGON ((-77.099754 42.274215, -77.0996569999...</span>
<span class="go">2   36107       50872  POLYGON ((-76.25014899999999 42.296676, -76.24...</span>
<span class="go">3   36059     1346176  POLYGON ((-73.707662 40.727831, -73.700272 40....</span>
<span class="go">4   36011       79693  POLYGON ((-76.279067 42.785866, -76.2753479999...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load real flows into a FlowDataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># download the file with the real fluxes from: https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/tutorial/data/NY_commuting_flows_2011.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">FlowDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;NY_commuting_flows_2011.csv&quot;</span><span class="p">,</span>
<span class="go">                                        tessellation=tessellation,</span>
<span class="go">                                        tile_id=&#39;tile_ID&#39;,</span>
<span class="go">                                        sep=&quot;,&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">     flow origin destination</span>
<span class="go">0  121606  36001       36001</span>
<span class="go">1       5  36001       36005</span>
<span class="go">2      29  36001       36007</span>
<span class="go">3      11  36001       36017</span>
<span class="go">4      30  36001       36019</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.flowdataframe.FlowDataFrame.get_flow">
<span class="sig-name descname"><span class="pre">get_flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.flowdataframe.FlowDataFrame.get_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the flow between two locations. If there is no flow between two locations it returns 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin_id</strong> (<em>str</em>) – the identifier of the origin tile.</p></li>
<li><p><strong>destination_id</strong> (<em>str</em>) – the identifier of the tessellation tile.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the flow between the two locations.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load a spatial tessellation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_tess</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">NY_COUNTIES_2011</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tessellation</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">url_tess</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;tile_id&#39;</span><span class="p">:</span> <span class="s1">&#39;tile_ID&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tessellation</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">  tile_ID  population                                           geometry</span>
<span class="go">0   36019       81716  POLYGON ((-74.006668 44.886017, -74.027389 44....</span>
<span class="go">1   36101       99145  POLYGON ((-77.099754 42.274215, -77.0996569999...</span>
<span class="go">2   36107       50872  POLYGON ((-76.25014899999999 42.296676, -76.24...</span>
<span class="go">3   36059     1346176  POLYGON ((-73.707662 40.727831, -73.700272 40....</span>
<span class="go">4   36011       79693  POLYGON ((-76.279067 42.785866, -76.2753479999...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load real flows into a FlowDataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># download the file with the real fluxes from: https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/tutorial/data/NY_commuting_flows_2011.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">FlowDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;NY_commuting_flows_2011.csv&quot;</span><span class="p">,</span>
<span class="go">                                        tessellation=tessellation,</span>
<span class="go">                                        tile_id=&#39;tile_ID&#39;,</span>
<span class="go">                                        sep=&quot;,&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">     flow origin destination</span>
<span class="go">0  121606  36001       36001</span>
<span class="go">1       5  36001       36005</span>
<span class="go">2      29  36001       36007</span>
<span class="go">3      11  36001       36017</span>
<span class="go">4      30  36001       36019</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">fdf</span><span class="o">.</span><span class="n">get_flow</span><span class="p">(</span><span class="s1">&#39;36001&#39;</span><span class="p">,</span> <span class="s1">&#39;36007&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">flow</span><span class="p">)</span>
<span class="go">29</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.flowdataframe.FlowDataFrame.plot_flows">
<span class="sig-name descname"><span class="pre">plot_flows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">map_f=None</span></em>, <em class="sig-param"><span class="pre">min_flow=0</span></em>, <em class="sig-param"><span class="pre">tiles='Stamen</span> <span class="pre">Toner'</span></em>, <em class="sig-param"><span class="pre">zoom=6</span></em>, <em class="sig-param"><span class="pre">flow_color='red'</span></em>, <em class="sig-param"><span class="pre">opacity=0.5</span></em>, <em class="sig-param"><span class="pre">flow_weight=5</span></em>, <em class="sig-param"><span class="pre">flow_exp=0.5</span></em>, <em class="sig-param"><span class="pre">style_function=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></em>, <em class="sig-param"><span class="pre">flow_popup=False</span></em>, <em class="sig-param"><span class="pre">num_od_popup=5</span></em>, <em class="sig-param"><span class="pre">tile_popup=True</span></em>, <em class="sig-param"><span class="pre">radius_origin_point=5</span></em>, <em class="sig-param"><span class="pre">color_origin_point='#3186cc'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.flowdataframe.FlowDataFrame.plot_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the flows of a FlowDataFrame on a Folium map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>map_f</strong> (<em>folium.Map, optional</em>) – the <cite>folium.Map</cite> object where the flows will be plotted. If <cite>None</cite>, a new map will be created. The default is <cite>None</cite>.</p></li>
<li><p><strong>min_flow</strong> (<em>float, optional</em>) – only flows larger than <cite>min_flow</cite> will be plotted. The default is <cite>0</cite>.</p></li>
<li><p><strong>tiles</strong> (<em>str, optional</em>) – folium’s <cite>tiles</cite> parameter. The default is <cite>Stamen Toner</cite>.</p></li>
<li><p><strong>zoom</strong> (<em>int, optional</em>) – initial zoom of the map. The default is <cite>6</cite>.</p></li>
<li><p><strong>flow_color</strong> (<em>str, optional</em>) – the color of the flow edges. The default is <cite>red</cite>.</p></li>
<li><p><strong>opacity</strong> (<em>float, optional</em>) – the opacity (alpha level) of the flow edges. The default is <cite>0.5</cite>.</p></li>
<li><p><strong>flow_weight</strong> (<em>float, optional</em>) – the weight factor used in the function to compute the thickness of the flow edges. The default is <cite>5</cite>.</p></li>
<li><p><strong>flow_exp</strong> (<em>float, optional</em>) – the weight exponent used in the function to compute the thickness of the flow edges. The default is <cite>0.5</cite>.</p></li>
<li><p><strong>style_function</strong> (<em>lambda function, optional</em>) – the GeoJson style function. The default is <cite>plot.flow_style_function</cite>.</p></li>
<li><p><strong>flow_popup</strong> (<em>boolean, optional</em>) – if <cite>True</cite>, when clicking on a flow edge a popup window displaying information on the flow will appear. The default is <cite>False</cite>.</p></li>
<li><p><strong>num_od_popup</strong> (<em>int, optional</em>) – number of origin-destination pairs to show in the popup window of each origin location. The default is <cite>5</cite>.</p></li>
<li><p><strong>tile_popup</strong> (<em>boolean, optional</em>) – if <cite>True</cite>, when clicking on a location marker a popup window displaying information on the flows departing from that location will appear. The default is <cite>True</cite>.</p></li>
<li><p><strong>radius_origin_point</strong> (<em>float, optional</em>) – the size of the location markers. The default is <cite>5</cite>.</p></li>
<li><p><strong>color_origin_point</strong> (<em>str, optional</em>) – the color of the location markers. The default is ‘#3186cc’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the <cite>folium.Map</cite> object with the plotted flows.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>folium.Map</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load a spatial tessellation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_tess</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">NY_COUNTIES_2011</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tessellation</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">url_tess</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;tile_id&#39;</span><span class="p">:</span> <span class="s1">&#39;tile_ID&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load real flows into a FlowDataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># download the file with the real fluxes from: https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/tutorial/data/NY_commuting_flows_2011.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">FlowDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;NY_commuting_flows_2011.csv&quot;</span><span class="p">,</span>
<span class="go">                                        tessellation=tessellation,</span>
<span class="go">                                        tile_id=&#39;tile_ID&#39;,</span>
<span class="go">                                        sep=&quot;,&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">fdf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="go">     flow origin destination</span>
<span class="go">0  121606  36001       36001</span>
<span class="go">1       5  36001       36005</span>
<span class="go">2      29  36001       36007</span>
<span class="go">3      11  36001       36017</span>
<span class="go">4      30  36001       36019</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">fdf</span><span class="o">.</span><span class="n">plot_flows</span><span class="p">(</span><span class="n">flow_color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
</pre></div>
</div>
<img alt="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_flows_example.png" src="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_flows_example.png" />
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.flowdataframe.FlowDataFrame.plot_tessellation">
<span class="sig-name descname"><span class="pre">plot_tessellation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_f</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxitems</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style_func_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">popup_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['tile_ID']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Stamen</span> <span class="pre">Toner'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geometry'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.flowdataframe.FlowDataFrame.plot_tessellation" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the spatial tessellation on a Folium map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>map_f</strong> (<em>folium.Map, optional</em>) – the <cite>folium.Map</cite> object where the GeoDataFrame describing the spatial tessellation will be plotted. If <cite>None</cite>, a new map will be created. The default is <cite>None</cite>.</p></li>
<li><p><strong>maxitems</strong> (<em>int, optional</em>) – maximum number of tiles to plot. If <cite>-1</cite>, all tiles will be plotted. The default is <cite>-1</cite>.</p></li>
<li><p><strong>style_func_args</strong> (<em>dict, optional</em>) – a dictionary to pass the following style parameters (keys) to the GeoJson style function of the polygons: ‘weight’, ‘color’, ‘opacity’, ‘fillColor’, ‘fillOpacity’. The default is <cite>{}</cite>.</p></li>
<li><p><strong>popup_features</strong> (<em>list, optional</em>) – when clicking on a tile polygon, a popup window displaying the information in the
columns of <cite>gdf</cite> listed in <cite>popup_features</cite> will appear. The default is <cite>[constants.TILE_ID]</cite>.</p></li>
<li><p><strong>tiles</strong> (<em>str, optional</em>) – folium’s <cite>tiles</cite> parameter. The default is ‘Stamen Toner’.</p></li>
<li><p><strong>zoom</strong> (<em>int, optional</em>) – the initial zoom of the map. The default is <cite>6</cite>.</p></li>
<li><p><strong>geom_col</strong> (<em>str, optional</em>) – the name of the geometry column of the GeoDataFrame representing the spatial tessellation. The default is ‘geometry’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the <cite>folium.Map</cite> object with the plotted GeoDataFrame.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>folium.Map</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">skmob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load a spatial tessellation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_tess</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">NY_COUNTIES_2011</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tessellation</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">url_tess</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;tile_id&#39;</span><span class="p">:</span> <span class="s1">&#39;tile_ID&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load real flows into a FlowDataFrame</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># download the file with the real fluxes from: https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/tutorial/data/NY_commuting_flows_2011.csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fdf</span> <span class="o">=</span> <span class="n">skmob</span><span class="o">.</span><span class="n">FlowDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;NY_commuting_flows_2011.csv&quot;</span><span class="p">,</span>
<span class="go">                                        tessellation=tessellation,</span>
<span class="go">                                        tile_id=&#39;tile_ID&#39;,</span>
<span class="go">                                        sep=&quot;,&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">fdf</span><span class="o">.</span><span class="n">plot_tessellation</span><span class="p">(</span><span class="n">popup_features</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tile_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;population&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
</pre></div>
</div>
<img alt="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_tessellation_example.png" src="https://raw.githubusercontent.com/scikit-mobility/scikit-mobility/master/examples/plot_tessellation_example.png" />
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skmob.core.flowdataframe.FlowDataFrame.settings_from">
<span class="sig-name descname"><span class="pre">settings_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flowdataframe</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.flowdataframe.FlowDataFrame.settings_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the attributes from another FlowDataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flowdataframe</strong> (<em>FlowDataFrame</em>) – the FlowDataFrame from which to copy the attributes.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skmob.core.flowdataframe.FlowSeries">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skmob.core.flowdataframe.</span></span><span class="sig-name descname"><span class="pre">FlowSeries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fastpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skmob.core.flowdataframe.FlowSeries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="preprocessing.html" class="btn btn-neutral float-right" title="Preprocessing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../index.html" class="btn btn-neutral float-left" title="Scikit-mobility Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, skmob devs.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>